<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>企业微信听录音统计系统</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1>📊 企业微信听录音统计系统</h1>
                    <p class="subtitle">上传日志文件 · 查看统计报表 · 月度累计分析</p>
                </div>
                <a href="/logout" class="btn btn-secondary" style="text-decoration: none;">退出登录</a>
            </div>
        </header>

        <!-- 文件上传区域 -->
        <section class="upload-section">
            <h2>📤 上传日志文件</h2>

            <div class="drop-zone" id="dropZone">
                <div class="drop-zone-content">
                    <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <p class="drop-text">拖拽文件到此处或点击选择</p>
                    <p class="drop-hint">支持多个 .zip 文件同时上传</p>
                    <input type="file" id="fileInput" multiple accept=".zip" style="display: none;">
                    <button class="btn btn-primary" id="selectBtn">选择文件</button>
                </div>
            </div>

            <!-- 文件列表 -->
            <div class="file-list" id="fileList" style="display: none;">
                <h3>待上传文件</h3>
                <div id="fileItems"></div>
                <div class="upload-actions">
                    <button class="btn btn-success" id="uploadBtn">开始上传</button>
                    <button class="btn btn-secondary" id="clearBtn">清空列表</button>
                </div>
            </div>

            <!-- 上传进度 -->
            <div class="upload-progress" id="uploadProgress" style="display: none;">
                <h3>上传进度</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText">0%</p>
            </div>

            <!-- 上传结果 -->
            <div class="upload-results" id="uploadResults" style="display: none;">
                <h3>上传结果</h3>
                <div id="resultsContent"></div>
            </div>
        </section>

        <!-- 报表查询区域 -->
        <section class="report-section">
            <h2>📈 报表查询</h2>

            <div class="query-tabs">
                <button class="tab-btn active" data-tab="daily">日报表</button>
                <button class="tab-btn" data-tab="monthly">月报表</button>
            </div>

            <!-- 日报表查询 -->
            <div class="tab-content active" id="dailyTab">
                <div class="query-form">
                    <label for="dailyDate">选择日期：</label>
                    <input type="date" id="dailyDate" class="date-input">
                    <button class="btn btn-primary" id="queryDailyBtn">查询</button>
                </div>
                <div class="report-display" id="dailyReport"></div>
            </div>

            <!-- 月报表查询 -->
            <div class="tab-content" id="monthlyTab">
                <div class="query-form">
                    <label for="monthlyDate">选择月份：</label>
                    <input type="month" id="monthlyDate" class="date-input">
                    <button class="btn btn-primary" id="queryMonthlyBtn">查询</button>
                </div>
                <div class="report-display" id="monthlyReport"></div>
            </div>
        </section>

        <!-- 企业微信推送区域 -->
        <section class="wecom-section">
            <h2>📨 企业微信推送</h2>

            <div class="wecom-form">
                <div class="form-group">
                    <label for="wecomDate">选择日期：</label>
                    <input type="date" id="wecomDate" class="date-input">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="sendTestBtn">
                        <span>📤</span> 发送到测试环境
                    </button>
                    <button class="btn btn-success" id="sendProdBtn">
                        <span>🚀</span> 发送到生产环境
                    </button>
                </div>
            </div>

            <div class="schedule-settings">
                <h3>⏰ 定时发送设置</h3>
                <div class="schedule-form">
                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="scheduleEnabled">
                            <span>启用定时发送</span>
                        </label>
                    </div>
                    <div class="form-group">
                        <label for="scheduleTime">发送时间：</label>
                        <input type="time" id="scheduleTime" class="time-input" value="09:00">
                    </div>
                    <button class="btn btn-primary" id="saveScheduleBtn">保存设置</button>
                </div>
                <p class="schedule-note">💡 启用后，系统将在每天指定时间自动发送当天数据到生产环境</p>
            </div>
        </section>

        <!-- 文件管理区域 -->
        <section class="files-section">
            <h2>📁 已上传文件</h2>
            <button class="btn btn-secondary" id="refreshFilesBtn">刷新列表</button>
            <div class="files-table" id="filesTable">
                <p class="loading">加载中...</p>
            </div>
        </section>
    </div>

    <footer>
        <p>企业微信听录音统计系统 © 2025</p>
    </footer>

    <script src="/static/js/app.js"></script>
</body>

</html>